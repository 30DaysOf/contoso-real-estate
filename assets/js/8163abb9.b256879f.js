"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[7157],{3905:(e,t,n)=>{n.d(t,{Zo:()=>s,kt:()=>m});var r=n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=r.createContext({}),c=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},s=function(e){var t=c(e.components);return r.createElement(l.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},h=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,i=e.originalType,l=e.parentName,s=p(e,["components","mdxType","originalType","parentName"]),u=c(n),h=o,m=u["".concat(l,".").concat(h)]||u[h]||d[h]||i;return n?r.createElement(m,a(a({ref:t},s),{},{components:n})):r.createElement(m,a({ref:t},s))}));function m(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=n.length,a=new Array(i);a[0]=h;var p={};for(var l in t)hasOwnProperty.call(t,l)&&(p[l]=t[l]);p.originalType=e,p[u]="string"==typeof e?e:o,a[1]=p;for(var c=2;c<i;c++)a[c]=n[c];return r.createElement.apply(null,a)}return r.createElement.apply(null,n)}h.displayName="MDXCreateElement"},45102:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>d,frontMatter:()=>i,metadata:()=>p,toc:()=>c});var r=n(87462),o=(n(67294),n(3905));const i={slug:"/develop/scenario-4",title:"Introduction"},a=void 0,p={unversionedId:"develop/scenario-4/intro",id:"develop/scenario-4/intro",title:"Introduction",description:"This scenario illustrates how to develop and containerize a payments application to be deployed to Azure Container Apps",source:"@site/docs/02-develop/scenario-4/0-intro.md",sourceDirName:"02-develop/scenario-4",slug:"/develop/scenario-4",permalink:"/contoso-real-estate/develop/scenario-4",draft:!1,tags:[],version:"current",sidebarPosition:0,frontMatter:{slug:"/develop/scenario-4",title:"Introduction"},sidebar:"guideSidebar",previous:{title:"Federated Authentication",permalink:"/contoso-real-estate/develop/scenario-3/federated"},next:{title:"Setup",permalink:"/contoso-real-estate/develop/scenario-4/setup"}},l={},c=[{value:"1. Architecture",id:"1-architecture",level:2},{value:"2. Components",id:"2-components",level:2},{value:"2.1. Frontend Application",id:"21-frontend-application",level:3},{value:"2.2 Stripe Integration",id:"22-stripe-integration",level:3}],s={toc:c},u="wrapper";function d(e){let{components:t,...i}=e;return(0,o.kt)(u,(0,r.Z)({},s,i,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"This scenario illustrates how to develop and containerize a payments application to be deployed to ",(0,o.kt)("a",{parentName:"p",href:"https://learn.microsoft.com/azure/container-apps/overview"},"Azure Container Apps")),(0,o.kt)("h2",{id:"1-architecture"},"1. Architecture"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Scenario Architecture Diagram",src:n(45007).Z,width:"1494",height:"894"})),(0,o.kt)("h2",{id:"2-components"},"2. Components"),(0,o.kt)("h3",{id:"21-frontend-application"},"2.1. Frontend Application"),(0,o.kt)("p",null,"The frontend application, in this case the portal, needs to be slightly modified to support the payments (reservation) flow. "),(0,o.kt)("p",null,"Each property will have a button to make a reservation, which will redirect the user to the payment flow. The payment flow will be implemented using ",(0,o.kt)("a",{parentName:"p",href:"https://stripe.com/"},"Stripe"),", which is a payment processing platform that allows you to accept payments online."),(0,o.kt)("h3",{id:"22-stripe-integration"},"2.2 Stripe Integration"),(0,o.kt)("p",null,"In order to complete the integration, we will use the same Azure Functions application. We will set up an Azure Function to receive Stripe webhook events by defining a webhook endpoint URL and registering it with Stripe. "),(0,o.kt)("p",null,"When API Management receives a request for the webhook endpoint URL, it will forward the request to the Azure Function. The Azure Function will then handle the incoming webhook event and perform the desired actions in response to it. For that we will need to configure the Azure Function app to use the Stripe API by providing our Stripe API keys and other necessary credentials as environment variables. Please notice that when using Azure Developer CLI template, all those variables are already configured, except for the Stripe API keys."),(0,o.kt)("p",null,"The Azure Function code is written to handle the incoming webhook events and perform the desired actions in response to them, such as creating a new order, charging a payment method, or updating an order. Those actions are performed by calling the Stripe API and saved to the database, to be used by the frontend application, as described in the previous section."))}d.isMDXComponent=!0},45007:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/contoso-scenario-4-decb5de9b722939539413773c030289c.png"}}]);